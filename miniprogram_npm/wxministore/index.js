!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var n=e();for(var o in n)("object"==typeof exports?exports:t)[o]=n[o]}}(self,(function(){return(()=>{"use strict";var t={642:t=>{var e,n,o,r,a="[object Array]",i="[object Object]",s=function(t){return Object.prototype.toString.call(t)},c=function(t){return JSON.parse(JSON.stringify(t))},u=function(t,e){var n=0<arguments.length&&void 0!==t?t:{},o=1<arguments.length&&void 0!==e?e:{},r={};return f(n,o,"",r),l(n,o,"",r),r},f=function t(e,n,o,r){var c=0<arguments.length&&void 0!==e?e:{},u=1<arguments.length&&void 0!==n?n:{},f=2<arguments.length&&void 0!==o?o:"",l=3<arguments.length&&void 0!==r?r:{};if(s(c)!==a||(s(u)!==a||c.length===u.length)&&s(u)===a)return Object.entries(c).forEach((function(e){var n=e[0],o=e[1],r=""===f?n:f+"."+n;s(c)===a&&(r=""===f?n:f+"["+n+"]"),u.hasOwnProperty(n)?s(u[n])===i&&s(c[n])===i||s(u[n])===a&&s(c[n])===a?t(c[n],u[n],r,l):u[n]!==c[n]&&(l[r]=o):l[r]=o})),l;l[f]=c},l=function t(e,n,o,r){var c=0<arguments.length&&void 0!==e?e:{},u=1<arguments.length&&void 0!==n?n:{},f=2<arguments.length&&void 0!==o?o:"",l=3<arguments.length&&void 0!==r?r:{};if(s(c)!==a||(s(u)!==a||c.length===u.length)&&s(u)===a)return Object.entries(u).forEach((function(e){var n=e[0],o=""===f?n:f+"."+n;s(c)===a&&(o=""===f?n:f+"["+n+"]"),c.hasOwnProperty(n)?(s(u[n])===i&&s(c[n])===i||s(u[n])===a&&s(c[n])===a)&&t(c[n],u[n],o,l):l[o]=null})),l},h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},p=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),v=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},d=function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)};Object.keys||(Object.keys=(e=Object.prototype.hasOwnProperty,n=!{toString:null}.propertyIsEnumerable("toString"),r=(o=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"]).length,function(t){if("object"!==(void 0===t?"undefined":h(t))&&"function"!=typeof t||null===t)throw new TypeError("Object.keys called on non-object");var a=[];for(var i in t)e.call(t,i)&&a.push(i);if(n)for(var s=0;s<r;s++)e.call(t,o[s])&&a.push(o[s]);return a})),Object.entries||(Object.entries=function(t){for(var e=Object.keys(t),n=e.length,o=new Array(n);n--;)o[n]=[e[n],t[e[n]]];return o});var y="1.3.1";console.log("当前wxministore版本：1.3.1");var g=function(){function t(e){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.version=y,this.$state={},this.$r=[];var n=e.openPart,o=void 0!==n&&n,r=e.behavior,u=e.methods,f=void 0===u?{}:u,l=e.pageLisener,h=void 0===l?{}:l,p=e.pageListener,g=e.nonWritable,m=void 0!==g&&g,$=e.debug,O=void 0===$||$;function P(t,e){var n=1<arguments.length&&void 0!==e?e:{};t.$store={};var o=n.useProp;n.hasOwnProperty("useProp")&&(o&&"string"==typeof o||s(o)===a?t.$store.useProp=[].concat(o):t.$store.useProp=[]),t.$store.useStore=E(n),E(n)&&(w.$r.push(t),t.$store.useProp?t.setData({$state:b(w.$state,t.$store.useProp,(function(t,e){return t===e}))}):t.setData({$state:w.$state}))}function j(t){var e=w.$r.findIndex((function(e){return e===t}));-1<e&&w.$r.splice(e,1)}p=p||h,this.debug=O,this.$state={},s(e.state)===i&&(this.$state=c(e.state)),this.$r=[],this.$openPart=o;var w=this,S=["data","onLoad","onShow","onReady","onHide","onUnload","onPullDownRefresh","onReachBottom","onShareAppMessage","onPageScroll","onTabItemTap"],E=function(t){return!0===o&&!0===(0<arguments.length&&void 0!==t?t:{}).useStore||!o},k=Page,A=Component;if(App.Page=function(){for(var t=arguments.length,e=Array(1<t?t-1:0),n=1;n<t;n++)e[n-1]=arguments[n];var o=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};E(o)&&(o.data=v({},o.data||{},{$state:w.$state})),Object.keys(f).forEach((function(t){"function"!=typeof f[t]||S.some((function(e){return e===t}))||(o[t]=f[t])}));var r=o.onLoad;o.onLoad=function(){P(this,o),r&&r.apply(this,arguments)};var a=o.onUnload;o.onUnload=function(){j(this),a&&a.apply(this,arguments)},Object.keys(p).forEach((function(t){var e;"function"==typeof p[t]&&S.some((function(e){return e===t}))&&(e=o[t],o[t]=function(){var n=p[t].apply(this,arguments);return e&&e.apply(this,arguments)||n})})),k.apply(void 0,[o].concat(e))},!m)try{Page=App.Page}catch(e){}if(App.Component=function(){for(var t=arguments.length,e=Array(1<t?t-1:0),n=1;n<t;n++)e[n-1]=arguments[n];var o=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};function a(){P(this,o),h&&h.apply(this,arguments)}function c(){j(this),p&&p.apply(this,arguments)}E(o)&&(o.data=v({},o.data||{},{$state:w.$state})),Object.keys(f).forEach((function(t){"function"!=typeof f[t]||S.some((function(e){return e===t}))||(o.methods||(o.methods={}),o.methods[t]=f[t])})),r&&(o.behaviors=[r].concat(d(o.behaviors||[])));var u=o.lifetimes,l=void 0===u?{}:u,h=l.attached||o.attached,p=l.detached||o.detached;s(o.lifetimes)===i?(o.lifetimes.attached=a,o.lifetimes.detached=c):(o.attached=a,o.detached=c),A.apply(void 0,[o].concat(e))},!m)try{Component=App.Component}catch(e){}}return p(t,[{key:"setState",value:function(t,e){var n=1<arguments.length&&void 0!==e?e:function(){};if(s(t)!==i)throw new Error("setState的第一个参数须为object!");this.debug&&console.time&&console.time("setState");var o,r,a,f,l=this.$state,h=m(t,l);this.$state=h,0<this.$r.length?(o=u(h,l),this.debug&&console.log("diff后实际设置的值：",c(o)),0<(r=Object.keys(o)).length?(a={},r.forEach((function(t){a["$state."+t]=o[t]})),f=this.$r.map((function(t){if(t.$store.hasOwnProperty("useProp")){var e=b(a,t.$store.useProp,(function(t,e){return t==="$state."+e||!!t.match(new RegExp("^[$]state."+e+"[.|[]","g"))}));return 0<Object.keys(e).length?new Promise((function(n){t.setData(e,n)})):Promise.resolve()}return new Promise((function(e){t.setData(a,e)}))})),Promise.all(f).then(n)):n()):n(),this.debug&&console.timeEnd&&console.timeEnd("setState")}},{key:"getState",value:function(){return c(this.$state)}},{key:"clearState",value:function(t){var e,n=0<arguments.length&&void 0!==t?t:function(){};this.debug&&console.time&&console.time("clearState"),this.$state={},0<this.$r.length?(e=this.$r.map((function(t){var e={$state:{}};return new Promise((function(n){t.setData(e,n)}))})),Promise.all(e).then(n)):n(),this.debug&&console.timeEnd&&console.timeEnd("clearState")}}]),t}(),b=function(t,e,n){var o=1<arguments.length&&void 0!==e?e:[],r=n,a={};return Object.keys(t).filter((function(t){return o.some((function(e){return r(t,e)}))})).forEach((function(e){a[e]=t[e]})),a},m=function(t,e){var n=c(e),o=c(t);return Object.keys(o).forEach((function(t){$(t,o[t],n)})),n},$=function(t,e,n){for(var o=O(t),r=n,a=0;a<o.length-1;a++)j(o[a],o[a+1],r),r=r[o[a]];r[o[o.length-1]]=e},O=function(t){for(var e="",n=[],o=0,r=t.length;o<r;o++){if("["===t[0])throw new Error("key值不能以[]开头");t[o].match(/\.|\[/g)&&(P(e,n),e=""),e+=t[o]}return P(e,n),n},P=function(t,e){var n=w(t);""!==n&&e.push(n)},j=function(t,e,n){var o;""!==t&&(o=s(n[t]),"number"==typeof e&&o!==a?n[t]=[]:"string"==typeof e&&o!==i&&(n[t]={}))},w=function(t){if(t.match(/\[\S+\]/g)){var e=t.replace(/\[|\]/g,"");if(Number.isNaN(parseInt(e)))throw new Error("[]中必须为数字");return+e}return t.replace(/\[|\.|\]| /g,"")};t.exports=g}},e={};return function n(o){var r=e[o];if(void 0!==r)return r.exports;var a=e[o]={exports:{}};return t[o](a,a.exports,n),a.exports}(642)})()}));